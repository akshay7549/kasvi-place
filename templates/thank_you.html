{% extends "base.html" %}
{% block title %}Thank You | Kasvi Palace{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-white to-yellow-100 px-6 py-24">
  <div class="bg-white shadow-2xl rounded-3xl p-10 max-w-2xl text-center relative overflow-hidden animate-fade-in-up">

    <!-- Decorative floating elements -->
    <div class="absolute -top-10 -left-10 w-36 h-36 bg-yellow-100 rounded-full opacity-30 animate-pulse z-0"></div>
    <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-yellow-200 rounded-full opacity-20 animate-pulse z-0"></div>

    <!-- Checkmark Icon -->
    <div class="relative z-10">
      <div class="w-20 h-20 mx-auto mb-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center shadow-lg animate-bounce">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>
      </div>

      <!-- Main Text -->
      <h1 class="text-4xl md:text-5xl font-extrabold text-yellow-500 mb-4 tracking-tight">Thank You!</h1>
      <p class="text-lg md:text-xl text-gray-700 mb-6 leading-relaxed">
        Your booking at <span class="font-semibold">Kasvi Palace</span> has been confirmed. <br class="hidden sm:block">
        We're excited to host you with warmth and luxury.
      </p>

      <!-- Buttons -->
      <div class="flex justify-center gap-4 mt-6 flex-wrap">
        <a href="{{ url_for('home') }}"
           class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-3 rounded-full shadow-lg transition duration-300 hover:scale-105">
          Back to Homepage
        </a>

        {% if recent_booking_id %}
        <button id="download-invoice-btn"
                data-booking-id="{{ recent_booking_id }}"
                class="bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-3 rounded-full shadow-lg transition duration-300 hover:scale-105">
          Download Invoice
        </button>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- ✅ Invoice Generating Modal -->
<div id="downloadModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center animate-fade-in-up">
    <div class="flex justify-center mb-4">
      <svg class="animate-spin h-8 w-8 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"/>
      </svg>
    </div>
    <h2 class="text-lg font-bold text-green-600">Generating Invoice...</h2>
    <p class="text-gray-600 mt-2">Please wait while your invoice is being downloaded.</p>
    <button id="closeModalBtn"
            class="mt-6 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-full font-semibold">
      Close
    </button>
  </div>
</div>

<!-- ✅ Invoice Downloaded Success Modal -->
<div id="downloadSuccessModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center animate-fade-in-up">
    <div class="text-green-500 text-4xl mb-4">✔</div>
    <h2 class="text-xl font-bold text-green-600">Invoice Downloaded!</h2>
    <p class="text-gray-600 mt-2">Thank you for booking with us. Enjoy your stay!</p>
    <button id="closeSuccessBtn"
            class="mt-6 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-full font-semibold">
      Close
    </button>
  </div>
</div>
{% endblock %}
